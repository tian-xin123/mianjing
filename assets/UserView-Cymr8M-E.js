import{d as C,r as p,m as B,c as _,e,E as h,G as H,t as d,H as u,u as I,I as M,a as n,w as m,b as i,p as N,l as v,f as U,o as l,_ as b}from"./index-Bs1UhSfa.js";import{r as A}from"./request-_vMSyIZd.js";const Z={class:"user-container"},S={class:"user-header"},T={class:"avatar-section"},$={key:1,class:"avatar placeholder-avatar"},j={class:"user-info-section"},z={class:"user-name"},D={class:"user-joined"},E={class:"user-functions"},L={class:"function-item"},q={class:"function-item"},G={class:"function-item"},R={class:"user-info-list"},F={class:"user-actions"},J=C({__name:"UserView",setup(K){const o=I(),s=p(null),r=p(!0),k=async()=>{try{r.value=!0;const a=await A.get("/auth/currentUser",{headers:{Authorization:N()}});a.data.code===1e4?s.value=a.data.data:v("获取用户信息失败")}catch(a){console.error("获取用户信息失败:",a),v("网络错误，请重试"),o.push("/login")}finally{r.value=!1}};B(()=>{k()});const g=()=>{localStorage.removeItem("token"),v("退出登录成功"),o.push("/login")};return(a,t)=>{const w=i("van-image"),c=i("van-cell"),y=i("van-cell-group"),V=i("van-button"),x=i("van-loading");return l(),_("div",Z,[e("div",S,[e("div",T,[s.value?.avatar?(l(),h(w,{key:0,src:s.value.avatar,fit:"cover",class:"avatar"},null,8,["src"])):(l(),_("div",$,d(s.value?.name?.charAt(0)||"U"),1))]),e("div",j,[e("h2",z,d(s.value?.username||"未知用户"),1),e("p",D,"注册时间: "+d(s.value?.createdAt||""),1)])]),e("div",E,[e("div",L,[e("div",{class:"function-icon",onClick:t[0]||(t[0]=f=>u(o).push("/history"))},[...t[3]||(t[3]=[M('<svg width="40" height="40" viewBox="0 0 40 40" fill="none" data-v-2c2fec08><circle cx="20" cy="20" r="18" stroke="#999" stroke-width="2" data-v-2c2fec08></circle><path d="M14 10H26V14H14V10Z" fill="#999" data-v-2c2fec08></path><path d="M14 18H26V22H14V18Z" fill="#999" data-v-2c2fec08></path><path d="M14 26H20V30H14V26Z" fill="#999" data-v-2c2fec08></path></svg>',1)])]),t[4]||(t[4]=e("div",{class:"function-name"},"历史记录",-1))]),e("div",q,[e("div",{class:"function-icon",onClick:t[1]||(t[1]=f=>u(o).push("/collect"))},[...t[5]||(t[5]=[e("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none"},[e("circle",{cx:"20",cy:"20",r:"18",stroke:"#999","stroke-width":"2"}),e("path",{d:"M12 16L18 22L28 12",stroke:"#999","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),t[6]||(t[6]=e("div",{class:"function-name"},"我的收藏",-1))]),e("div",G,[e("div",{class:"function-icon",onClick:t[2]||(t[2]=f=>u(o).push("/like"))},[...t[7]||(t[7]=[e("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none"},[e("circle",{cx:"20",cy:"20",r:"18",stroke:"#999","stroke-width":"2"}),e("path",{d:"M20 26C20 26 26 22 26 16C26 12 23 10 20 10C17 10 14 12 14 16C14 22 20 26 20 26Z",fill:"#999"})],-1)])]),t[8]||(t[8]=e("div",{class:"function-name"},"我的点赞",-1))])]),e("div",R,[n(y,{inset:""},{default:m(()=>[n(c,{title:"用户ID",value:s.value?.id||"-"},null,8,["value"]),n(c,{title:"用户名",value:s.value?.username||"-"},null,8,["value"]),n(c,{title:"最后更新",value:s.value?.updatedAt||"-"},null,8,["value"])]),_:1})]),e("div",F,[n(V,{type:"danger",block:"",onClick:g},{default:m(()=>[...t[9]||(t[9]=[U("退出登录",-1)])]),_:1})]),r.value?(l(),h(x,{key:0,type:"spinner",size:"40px"})):H("",!0)])}}}),Q=b(J,[["__scopeId","data-v-2c2fec08"]]);export{Q as default};
